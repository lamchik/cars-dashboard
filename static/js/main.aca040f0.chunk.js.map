{"version":3,"sources":["components/Header/index.jsx","components/Footer/index.jsx","components/Sidebar/index.jsx","api/cars.js","components/Search/index.jsx","components/Table/index.jsx","components/Result/index.jsx","components/ui/Preloader/index.jsx","components/ui/Error/index.jsx","containers/Table/index.jsx","App.js","index.js"],"names":["Header","className","Footer","SideBar","getCarsTable","a","axios","get","response","data","Search","onSubmit","useState","query","setQuery","e","preventDefault","onChange","target","value","placeholder","type","getCarLabel","car","mark","model","Table","cars","tariffs","sortOrderDesc","changeSortOrder","searchQuery","chooseCar","composeCars","useCallback","filteredCars","filter","toLowerCase","includes","sort","b","onClick","map","tariff","chooseCarHandler","year","Result","text","Preloader","Error","error","toString","undefined","search","setSearch","dataState","setDataState","setError","setCars","setTariffs","sortOrder","setSortOrder","chosenCarLabel","setChosenCarLabel","useEffect","tariffs_list","fetchData","catch","err","console","App","Sidebar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.aca040f0.chunk.js","sourcesContent":["import React from 'react'\nimport \"./styles.css\"\n\nconst Header = () => {\n  return (\n    <header className=\"header\">Header</header>\n  )\n}\n\nexport default Header;","import React from 'react'\nimport \"./styles.css\"\n\nconst Footer = () => {\n  return (\n    <footer className=\"footer\">Footer</footer>\n  )\n}\n\nexport default Footer;","import React from 'react'\nimport './styles.css'\n\nconst SideBar = () => {\n  return (\n    <aside className=\"sidebar\">\n      <p>Sidebar</p>\n    </aside>\n  )\n}\n\nexport default SideBar;","import axios from \"axios\";\n\nexport const getCarsTable = async () => {\n  const response = await axios.get(\"https://city-mobil.ru/api/cars\")\n\n  return response.data\n}","import React, {useState} from 'react'\nimport \"./styles.css\"\n\nconst Search = ({onSubmit}) => {\n  const [query, setQuery] = useState(\"\")\n\n  const submitHandler = (e) => {\n    e.preventDefault()\n    onSubmit(query)\n  }\n\n  const onInputChangeHandler = (e) => {\n    setQuery(e.target.value)\n  }\n\n  return (\n    <div>\n      <form onSubmit={submitHandler} className=\"search-form\">\n        <input onChange={onInputChangeHandler} placeholder=\"Поиск\" className=\"search-form__input\" type=\"text\" />\n        <button className=\"search-form__button\" type=\"submit\">Найти</button>\n      </form>\n    </div>\n  )\n}\n\nexport default Search;","import React, {useCallback} from 'react'\nimport \"./styles.css\"\n\nconst getCarLabel = (car) => {\n  return `${car.mark} ${car.model}`\n}\n\nconst Table = ({\n cars,\n tariffs,\n sortOrderDesc,\n changeSortOrder,\n searchQuery,\n chooseCar,\n}) => {\n  const composeCars = useCallback((cars) => {\n    let filteredCars = cars;\n    if (searchQuery) {\n      filteredCars = cars.filter(car => getCarLabel(car).toLowerCase().includes(searchQuery.toLowerCase()))\n    }\n    return filteredCars.sort((a, b) => getCarLabel(a) > getCarLabel(b) ? sortOrderDesc : -1 * sortOrderDesc)\n  }, [sortOrderDesc, searchQuery])\n\n  const chooseCarHandler = (car, tariff) => {\n    chooseCar(car, tariff)\n  }\n\n  return (\n    <table className=\"table\">\n      <thead className=\"table__head\">\n      <tr>\n        <td onClick={changeSortOrder}\n            className={`table__cell table__cell_sortable ${sortOrderDesc === -1 ? \"table__cell_sortable_desc\" : \"table__cell_sortable_asc\"}`}>Марка\n          и модель\n        </td>\n        {tariffs.map(tariff => (\n          <td key={tariff} className=\"table__cell\">{tariff}</td>\n        ))}\n      </tr>\n      </thead>\n      <tbody>\n      {composeCars(cars).map(car => (\n        <tr key={getCarLabel(car)}>\n          <td key={car} className=\"table__cell\">{getCarLabel(car)}</td>\n          {tariffs.map(tariff => (\n            <td className={`table__cell ${car.tariffs[tariff] && \"table__cell_clickable\"}`} onClick={() => chooseCarHandler(car, tariff)} key={tariff}>{car.tariffs[tariff] ? car.tariffs[tariff].year : \"-\"}</td>\n          ))}\n        </tr>\n      ))}\n      </tbody>\n    </table>\n  )\n}\n\nexport default Table;","import React from 'react'\nimport \"./styles.css\"\nimport '../../fonts/IBM_Plex_Mono/IbmPlexMono.css'\n\nconst Result = ({text}) => {\n  return (\n    <div className=\"result\">{text}</div>\n  )\n}\n\nexport default Result;","import React from 'react'\nimport './styles.css'\n\nconst Preloader = () => {\n  return (\n    <div className=\"preloader\"/>\n  )\n}\n\nexport default Preloader;","import React from 'react'\nimport './styles.css'\n\nconst Error = ({error}) => {\n  return (\n    <p className=\"error\">{error.toString()}</p>\n  )\n}\n\nexport default Error;","import React, {useState, useEffect} from 'react'\nimport {getCarsTable} from '../../api/cars'\nimport Search from \"../../components/Search\"\nimport CarsTable from '../../components/Table'\nimport Result from '../../components/Result'\nimport Preloader from '../../components/ui/Preloader'\nimport Error from '../../components/ui/Error'\n\nimport \"./styles.css\"\n\nconst DATA_STATE_IDLE = 1\nconst DATA_STATE_LOADING = 2\nconst DATA_STATE_LOADED = 3\nconst DATA_STATE_ERROR = 4\n\nconst getCarLabel = (car, tariff) => {\n  return `Выбран автомобиль ${car.mark} ${car.model} ${car.tariffs[tariff].year} года выпуска`\n}\n\nconst Table = () => {\n  const [search, setSearch] = useState(undefined)\n\n  // data state for API request\n  const [dataState, setDataState] = useState(DATA_STATE_IDLE)\n  // error for API request\n  const [error, setError] = useState(\"\")\n\n  const [cars, setCars] = useState([]);\n  const [tariffs, setTariffs] = useState([]);\n  const [sortOrder, setSortOrder] = useState(1);\n\n  const [chosenCarLabel, setChosenCarLabel] = useState(undefined);\n\n  useEffect(() => {\n    async function fetchData () {\n      // perform API request\n      const {cars, tariffs_list} = await getCarsTable()\n      setCars(cars)\n      setTariffs(tariffs_list)\n      setDataState(DATA_STATE_LOADED)\n    }\n\n    // initialize data loading\n    setDataState(DATA_STATE_LOADING)\n    fetchData().catch((err) => {\n      // we encountered an error\n      setDataState(DATA_STATE_ERROR)\n      setError(err)\n    })\n  }, [])\n\n  const onSearchHandler = (query) => {\n    setSearch(query)\n  }\n\n  const changeSortOrder = () => {\n    setSortOrder(sortOrder === -1 ? 1 : -1)\n  }\n\n  const chooseCar = (car, tariff) => {\n    // car doesn't have requested tariff, that meant user clicked on '-' sign. Do nothing.\n    if (car.tariffs[tariff] === undefined) return;\n\n    setChosenCarLabel(getCarLabel(car, tariff))\n  }\n\n  const renderContent = () => {\n    if (dataState === DATA_STATE_IDLE || dataState === DATA_STATE_LOADING) {\n      return <div className=\"preloader-wrapper\"><Preloader /></div>\n    }\n\n    if (dataState === DATA_STATE_LOADED) {\n      return (\n        <CarsTable\n          cars={cars}\n          tariffs={tariffs}\n          sortOrderDesc={sortOrder}\n          changeSortOrder={changeSortOrder}\n          searchQuery={search}\n          chooseCar={chooseCar}\n        />\n      )\n    }\n\n    if (dataState === DATA_STATE_ERROR) {\n      return <Error error={error} />\n    }\n\n    console.error(\"Illegal place\")\n  }\n\n  return (\n    <div>\n      <div className=\"content-wrapper\">\n        <Search onSubmit={onSearchHandler} />\n      </div>\n      <div className=\"content-wrapper\">\n        {renderContent()}\n      </div>\n      {chosenCarLabel && <Result text={chosenCarLabel} /> }\n    </div>\n  )\n}\n\nexport default Table;","import Header from './components/Header'\nimport Footer from './components/Footer'\nimport Sidebar from './components/Sidebar'\nimport Table from './containers/Table'\nimport './App.css'\n\nfunction App() {\n  return (\n    <div>\n      <div className=\"wrapper\">\n        <Header />\n        <main className=\"main\">\n          <Sidebar />\n          <div className=\"pane\">\n            <Table />\n          </div>\n        </main>\n        <Footer />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}